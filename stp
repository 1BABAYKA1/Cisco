Протокол работает на канальном уровне. STP позволяет делать топологию избыточной на физическом уровне, но при этом логически блокировать петли. 
Достигается это с помощью того, что STP отправляет сообщения BPDU и обнаруживает фактическую топологию сети. А затем, определяя роли коммутаторов и портов, 
часть портов блокирует так, чтобы в итоге получить топологию без петель.

spanning-tree mode rapid-pvst

spanning-tree vlan 10 root primary

interface FastEthernet 0/24
  spanning-tree vlan 10 port-priority 240
  
  
